<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/publicLayout.xhtml">

	<ui:define name="head">
		
	</ui:define>
	<ui:define name="bodyContent">
		
		<h2>FileUpload Component</h2>
		
		<h:form>
			<b><h:commandLink action="welcome.jsf?faces-redirect=true" value="Back" /> </b><br/><br/>
		</h:form>
		
	    <p:growl id="msg" autoUpdate="true"/>  
	    
	    <p:panel header="FileUpload Advanced Mode">
			<h:form enctype="multipart/form-data">
			    <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
						allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
						invalidFileMessage="Only gif, jpg or png type images are allowed"
						sizeLimit="1048576"
						invalidSizeMessage="File size should not exceed 1MB"/>
			</h:form> 
       </p:panel>
       
       <br/><br/>
       
	    <p:panel header="FileUpload : Single File Restriction using jQuery">
			<h:form enctype="multipart/form-data">
			    <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
			    		widgetVar="upload"
						allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
						invalidFileMessage="Only gif, jpg or png type images are allowed"
						sizeLimit="1048576"
						invalidSizeMessage="File size should not exceed 1MB"/>
			</h:form> 
       </p:panel>
       
 		<br/><br/>
 
 		<p:panel header="FileUpload : Simple mode">
 		<h:form enctype="multipart/form-data">
		    <p:fileUpload value="#{fileUploadController.file}" mode="simple"/>
			<p:commandButton value="Submit" ajax="false" action="#{fileUploadController.uploadFile}"/>
		</h:form>
 		</p:panel>
 		
 		<script type="text/javascript">
 	
			$(document).ready(function() {
		    upload.buttonBar.find('input[type=file]').change(function() {
		        if (this.value) {
		            var files = upload.uploadContent.find('.files tr');
		            if (files.length > 1) {
		                $(files.get(0)).remove();
		            }
		        }
		    });
		});
		
		</script>
		
		<br/><br/>
		
	</ui:define>
</ui:composition>